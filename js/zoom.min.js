!function(i){i.fn.jqZoom=function(o){i(this).each(function(s,h){var n=i(h);t(n,o.selectorWidth,o.selectorHeight);var r=o&&o.zoomImgUrl?o.zoomImgUrl:n.attr("src");e(n,r,o.viewerWidth,o.viewerHeight)})};var t=function(t,e,o){var s=i("<div />").addClass("zoom-selector").width(e).height(o);t.after(s),t.closest(".zoom-box").on({mousemove:function(h){var n,r,d=h.pageX-i(this).offset().left,a=h.pageY-i(this).offset().top,c=e/2,f=o/2;n=d<c?0:d+c>t.width()?t.width()-e:d-c,r=a<f?0:a+f>t.height()?t.height()-o:a-f,s.css({left:n,top:r});var v=n*(i(this).find(".viewer-box>img").width()-i(this).find(".viewer-box").width())/(t.width()-e),w=r*(i(this).find(".viewer-box>img").height()-i(this).find(".viewer-box").height())/(t.height()-o);i(this).find(".viewer-box>img").css({left:-v,top:-w})},mouseenter:function(){s.css("display","block"),i(this).find(".viewer-box").css("display","block")},mouseleave:function(){s.css("display","none"),i(this).find(".viewer-box").css("display","none")}})},e=function(t,e,s,h){var n=i("<div />").addClass("viewer-box").width(s).height(h);t.closest(".zoom-box");n.css({left:t.width()+15,top:0}),o(t,function(o,s){var h=i("<img src='"+e+"' />").width(o).height(s);n.append(h),t.after(n)})},o=function(t,e){var o=new Image;o.src=t.attr("src")+"?date="+new Date,i(o).on("load",function(){e(o.width,o.height)})}}(jQuery);